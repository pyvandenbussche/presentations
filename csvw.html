<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CSVW - CSV on the Web</title>
  <meta name="description" content="Add semantics to tabular data on the Web">
  <meta name="author" content="Pierre-Yves Vandenbussche">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/league.css" id="theme"><!--white|league|sky|beige|simple|serif|blood|night|moon|solarized -->
  <link rel="stylesheet" href="css/math.css">
  <link rel="stylesheet" href="css/nv.d3.css" type="text/css">
  <script src="js/d3.js">
  </script>
  <script src="js/nv.d3.js">
  </script><!-- Code syntax highlighting kimbie.light|railscasts|zenburn -->
  <link rel="stylesheet" href="lib/css/kimbie.light.css"><!-- Printing and PDF exports -->

  <script>
                        var link = document.createElement( 'link' );
                        link.rel = 'stylesheet';
                        link.type = 'text/css';
                        link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
                        document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script><!--[if lt IE 9]>
                <script src="lib/js/html5shiv.js"></script>
                <![endif]-->
</head>
<body>
  <div class="reveal">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
      <!-- 
                                #######################
                                        Cover slide
                                ####################### 
                                -->
      <section>
        <h1>CSVW</h1>
        <h3>CSV, on, the, Web</h3>
        <div>
          <small>Presented by <a href="http://pyvandenbussche.info/">Pierre-Yves Vandenbussche</a> 2016-01-22</small>
        </div>
      </section><!-- 
                                ###############################
                                        CSV presence on the Web
                                ###############################
                                -->
      <section>
        <h3>The Web and CSV</h3>
        <p class="alignleft font90">"CSV is one of the most <em>popular formats</em> for publishing data on the web. It is <em>concise, easy</em> to understand by both humans and computers, and aligns nicely to the <em>tabular nature</em> of most data." <small><a href="http://w3c.github.io/csvw/primer/" target="_blank">[1]</a></small></p>
        <div style="height:8em; margin-bottom:2em">
          <div class='column' style="float:left; width: 33%; height:100%;">
            <p class="small"><a href="https://data.gov/data/" target="_blank">data.gov (USA)</a></p>
            <div id="chart_datagovus" class="scalechart nvchart" style="width: 100%; height:100%">
              <svg class="svg"></svg>
            </div>
          </div>
          <div class='column' style="float:left; width: 33%; height:100%;">
            <p class="small"><a href="https://data.gov.uk/data/" target="_blank">data.gov.uk (UK)</a></p>
            <div id="chart_datagovuk" class="scalechart nvchart" style="width: 100%; height:100%">
              <svg class="svg"></svg>
            </div>
          </div>
          <div class='column' style="float:left; width: 33%; height:100%;">
            <div id="chart_datagouvfr" class="scalechart nvchart" style="width: 100%; height:100%">
              <p class="small"><a href="https://www.data.gouv.fr/fr/datasets/" target="_blank">data.gouv.fr (FR)</a></p><svg class="svg"></svg>
            </div>
          </div>
        </div>
        <p class="alignleft footnote">Data gathered on 2016-01-22 from the respective data repositories</p>
      </section><!-- 
                                #######################
                                        CSV Model
                                ####################### 
                                -->
      <section>
        <h3>A simple model</h3>
        <div class="alignleft">
          <p>Common <em>tabular model</em>:</p>
        </div>
        <div class='column' style="float:left; width: 55%">
          <ul class="font80">
            <li>Data is structured into rows</li>
            <li>Rows are divided into the same number of cells corresponding to the columns</li>
          </ul>
        </div>
        <div class='column' style="float:right; width: 45%">
          <table class='small allBorders'>
            <tr>
              <td>row 1 - col 1</td>
              <td>row 1 - col 2</td>
              <td>row 1 - col 3</td>
            </tr>
            <tr>
              <td>row 2 - col 1</td>
              <td>row 2 - col 2</td>
              <td>row 2 - col 3</td>
            </tr>
          </table>
        </div>
        <div class="clear alignleft">
          <p class="info font85">=&gt; Can be applied to all tabular data not only CSV</p>
        </div>
        <div class="alignleft">
          <p>CSV (loose definition):</p>
        </div>
        <div class="alignleft">
          <ul class="font80">
            <li>A <em>separator character</em> is used to delimit cells (comma, semicolon, tab)</li>
            <li>The <em>header row</em> can be used to define columns titles</li>
          </ul>
        </div>
        <div class='column' style="float:left; width: 52%">
          <pre><code>
  "country","country group","name (en)"
  "at","eu","Austria"
  "be","eu","Belgium"
          </code></pre>
        </div>
        <div class='column' style="float:left; width: 5%">
          â†”
        </div>
        <div class='column' style="float:right; width: 40%">
          <table class='rightAlign reveal small'>
            <tr style="border-bottom: 3px">
              <th>country code</th>
              <th>country group</th>
              <th>name (en)</th>
            </tr>
            <tr>
              <td>at</td>
              <td>eu</td>
              <td>Austria</td>
            </tr>
            <tr>
              <td>be</td>
              <td>eu</td>
              <td>Belgium</td>
            </tr>
          </table>
        </div>
      </section><!-- 
                                #######################
                                        Expressivity
                                ####################### 
                                -->
      <section>
        <h3>Too simple in some cases...</h3>
        <div class="alignleft font80">
          <p><em>Easy to import/export</em> from/to other tabular data: spreadsheet, HTML table, Relational DB but...</p>
          <p><em>Not expressive enough</em> to capture metadata information such as type, value range, datatype, language, etc. (except columns label in header) <span class="warning">May result in data loss</span></p>
        </div>
        <div class="alignleft font80" style="margin: 0 2em;">
          <p class="font80">When shall you send a postcard to a contact with birth date: "1978-07-06"?</p>
          <ul class="font80">
            <li>a) 7 June</li>
            <li>b) 6 July</li>
            <li>c) both dates to be sure!</li>
          </ul>
        </div>
        <div class="alignleft font80">
          <p><em>=&gt; Need for a mean to encode and associate relevant metadata</em></p>
        </div>
      </section><!-- 
                                #######################
                                        W3C WG
                                ####################### 
                                -->
      <section>
        <h3>W3C Working Group - <a href="https://www.w3.org/2013/csvw" target="_blank">CSV on the Web</a></h3>
        <img src="img/W3C.png" style="height:100px;" class="deco">
        <p  class="alignleft font90">"Provide <em>higher interoperability</em> when working with datasets using the CSV (Comma-Separated Values) or similar formats" <small><a href="https://www.w3.org/2013/csvw/wiki/Main_Page" target="_blank">[2]</a></small></p>
        <p  class="alignleft font90">Recommendations published on the <em>17 December 2015</em></p>
       	<ul class="font90">
            <li><a href="http://www.w3.org/TR/tabular-metadata/" target="_blank">Metadata vocabulary for tabular data</a> (will be commonnly used by any tabular data such as HTML tables)</li>
            <li><a href="http://www.w3.org/TR/tabular-data-model/" target="_blank">Model for tabular data and metadata</a> along with the way to publish it on the Web
            </li>
            <li>Transformations <a href="http://www.w3.org/TR/csv2json/" target="_blank">CSV2JSON</a> and <a href="http://www.w3.org/TR/csv2rdf/" target="_blank">CSV2RDF</a>
            </li>
          </ul>
      </section><!-- 
                                ###########################
                                        Locating Metadata
                                ########################### 
                                -->      
      <section class="stack present">
          <section class="present">
        <h3>Metadata Location</h3>
        <div class="alignleft">
          <p class="font90"><em>4 methods:</em></p>
          <ol class="font90">
			<li>Link header</li>
			<li>Default locations</li>
			<li>Embedded metadata</li>
			<li>Overriding metadata</li>
          </ol>
		</div>
		<br/>
		<a href="#" class="navigate-down enabled">&#8615;</a>
      </section><!-- 
                                ###########################
                                        1. Link Header
                                ########################### 
                                --> 
      <section class="future">
        <h3>Link header</h3>
        <div class="alignleft font90">
			<p>The <a href="https://www.w3.org/wiki/LinkHeader" target="_blank">'link' header in HTTP</a> allows the server to point an interested client to another resource <em>containing metadata</em> about the requested resource without actually touching it</p>
		</div>
		<div>
			<p class="font70 example">Example of a CSV(tab-separated) file header pointing its metadata resource:</p>
		</div>
			<pre><code style="padding-left:20px;" class="http">
HTTP/1.1 200 OK
Content-Type: text/tab-separated-values
...
Link: &lt;metadata.json>; rel="describedBy"; type="application/csvm+json"
				</code></pre>
		<div class="alignleft font90">
			<p><span class="code">metadata.json</span> contains the metadata for processing the CSV file</p>
		</div>
      </section><!-- 
                                ###########################
                                        Default Location
                                ########################### 
                                --> 
	  <section class="future">
        <h3>Default locations</h3>
		<div class="alignleft font85">
			<p>Considering the file <em><span class="code">http://example.org/africa/countries.csv</span></em>, the default locations are:</p>
		</div>
        <div class="alignleft">
			<ul class="font80">
				<li>The well-known URI <em><span class="code">/.well-known/csvm</span></em> describing the template to access metadata files</li>
			</ul>
			<pre><code style="padding:0 0 0 20px;" class="html">
http://example.org/.well-known/csvm
			</code></pre>
			<ul class="font80">
				<li>Expand the file URI template with <em><span class="code">-metadata.json</span></em></li>
			</ul>
			<pre><code style="padding:0 0 0 20px;" class="html">
http://example.org/africa/countries.csv-metadata.json
			</code></pre>
			<ul class="font80">
				<li>Default metadata file name <em><span class="code">csv-metadata.json</span></em></li>
			</ul>
			<pre><code style="padding:0 0 0 20px;" class="html">
http://example.org/africa/csv-metadata.json
			</code></pre>
				
			
		</div>
      </section><!-- 
                                ###########################
                                       Embedded metadata
                                ########################### 
                                --> 
	  <section class="future">
        <h3>Embedded metadata</h3>
        <div class="alignleft font90">
			CSV specification only allows the first row to be a <em>header containing the column titles </em>
		</div>
		<br/>
		<div class="alignleft font90">
			<p>Specific parsers could agree on comments using a <span class="code">#</span> embedding metadata</em> <span class="warning">This is not natively supported by the CSV specification</span></p>
			<pre><code style="padding:0 0 0 20px;" class="html">
# publisher ISO
# updated 2012-04-19
#name country latitude longitude name(en)
#datatype string  float  float  string 
AD	42.546245	1.601554	Andorra.
AE	23.424076	53.847818	United Arab Emirates.
			</code></pre>
		</div>
      </section><!-- 
                                ###########################
                                       Overriding metadata
                                ########################### 
                                --> 
	  <section class="future">
        <h3>Overriding metadata</h3>
        <div class="alignleft font90">
			<p>Metadata information or file location is specified by the user <em>through a program</em></p>
			<div>
				<p class="font70 example">A processor might be invoked with parameters:</p>
			</div>
			<pre><code style="padding-left:20px;">
$ csvlint data.csv --datatypes:string,float,string,string
$ csvlint data.csv --schema:schema.json
				</code></pre>
			<p>This method <em>supersede</em> all the previous one</p>
		</div>
      </section>
      </section><!-- 
                                ###########################
                                       Metadata Syntax
                                ########################### 
                                --> 
	  <section>
        <h3>Metadata syntax</h3>
        <div class="alignleft font90">
			<p>Similar to JSON-LD</p>
			<pre><code style="padding-left:20px;" class="json">
{
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "@type": "Table",
  "url": "http://example.org/africa/countries.csv",
  "dc:modified": {"@value": "2010-12-31", "@type": "xsd:date"},
  "dcat:keyword": ["tree", "street", "maintenance"],
  "dc:publisher": {
    "schema:name": "Example Municipality",
    "schema:url": {"@id": "http://example.org"}
  },
  "tableSchema": {
    "columns": [{
      "name": "country",
      "titles": "Country",
      "datatype": "string",
      "required": true
    }, {
      "name": "latitude",
      "titles": "Latitude",
      "datatype": "float"
    }, {
      "name": "longitude",
      "titles": "Longitude",
      "datatype": "float"
    }, {
      "name": "name(en)",
      "titles": "name",
      "datatype": "string"
    }, {
      "name": "inventory_date",
      "titles": "Inventory Date",
      "datatype": {
        "base": "date",
        "format": "M/d/yyyy"
      }
    }],
    "primaryKey": "countryID",
    "aboutUrl": "#Country-{country}"
  }
}
				</code></pre>
		</div>
      </section><!-- 
                                ###########################
                                       References
                                ########################### 
                                -->
      <section>
        <h2>References</h2>
		<div class="alignleft font90">
			<p>https://www.w3.org/2013/05/lcsv-charter</p>
			<p>https://www.w3.org/2013/csvw/wiki/Main_Page</p>
			<p>https://www.w3.org/TR/2015/REC-tabular-data-model-20151217/</p>
		</div>
      </section>
    </div>
  </div>
  <script src="lib/js/head.min.js">
  </script> 
  <script src="js/reveal.js">
  </script> 
  <script>
                        // Full list of configuration options available at:
                        // https://github.com/hakimel/reveal.js#configuration
                        Reveal.initialize({controls: true,progress: true,slideNumber: true,overview: true,touch: true,fragments: true,embedded: false,history: true,center: true,
        width: 960,
        height: 700,
                                transition: 'concave', // none/fade/slide/convex/concave/zoom

                                // Optional reveal.js plugins
                                dependencies: [
                                        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                                        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                                        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                                        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                                        { src: 'plugin/zoom-js/zoom.js', async: true },
                                        { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/math/math.js', async: true }
                                ]
                        });

  </script> 
  <script>
      //Donut chart example
      nv.addGraph(function() {
        var chart = nv.models.pieChart()
              .x(function(d) { return d.label })
              .y(function(d) { return d.value })
              .showLabels(true)     //Display pie labels
              .labelThreshold(.05)  //Configure the minimum slice size for labels to show up
              .labelType("percent") //Configure what type of data to show in the label. Can be "key", "value" or "percent"
              ;

          d3.select("#chart_datagovus svg")
              .datum([
      {"label": "HTML","value" : 21.67} , 
      {"label": "XML","value" : 12.19} , 
      {"label": "PDF","value" : 9.67} , 
      {"label": "CSV","value" : 3.20} , 
      {"label": "JSON","value" : 2.85} , 
      {"label": "RDF","value" : 2.02} , 
      {"label": "XLS","value" : 1.40} , 
      {"label": "Other","value" : 47}
    ])
              .transition().duration(350)
              .call(chart)
              .selectAll("text")
              .style("fill", "#fff");

        return chart;
      });
      //Donut chart example
      nv.addGraph(function() {
        var chart = nv.models.pieChart()
              .x(function(d) { return d.label })
              .y(function(d) { return d.value })
              .showLabels(true)     //Display pie labels
              .labelThreshold(.05)  //Configure the minimum slice size for labels to show up
              .labelType("percent") //Configure what type of data to show in the label. Can be "key", "value" or "percent"
              ;

          d3.select("#chart_datagovuk svg")
              .datum([
      {"label": "HTML","value" : 37.69} , 
      {"label": "XML","value" : 21.28} , 
      {"label": "PDF","value" : 3.19} , 
      {"label": "CSV","value" : 15.79} , 
      {"label": "JSON","value" : 0} , 
      {"label": "RDF","value" : 0.76} , 
      {"label": "XLS","value" : 6.32} , 
      {"label": "Other","value" : 14.97}
    ])
              .transition().duration(350)
              .call(chart)
              .selectAll("text")
              .style("fill", "#fff");

        return chart;
      });
      //Donut chart example
      nv.addGraph(function() {
        var chart = nv.models.pieChart()
              .x(function(d) { return d.label })
              .y(function(d) { return d.value })
              .showLabels(true)     //Display pie labels
              .labelThreshold(.05)  //Configure the minimum slice size for labels to show up
              .labelType("percent") //Configure what type of data to show in the label. Can be "key", "value" or "percent"
              ;
          d3.select("#chart_datagouvfr svg")
              .datum([
      {"label": "HTML","value" : 1.51} , 
      {"label": "XML","value" : 0.90} , 
      {"label": "PDF","value" : 1.02} , 
      {"label": "CSV","value" : 19.83} , 
      {"label": "JSON","value" : 14.34} , 
      {"label": "RDF","value" : 0} , 
      {"label": "XLS","value" : 8.39} , 
      {"label": "Other","value" : 54.01}
    ])
              .transition().duration(350)
              .call(chart)
              .selectAll("text")
              .style("fill", "#fff");

        return chart;
      });
  </script>
</body>
</html>
